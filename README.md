# UID-OUID Change Audit

## 목적

**연속 연도 공간 데이터의 품질관리 및 이력 검증 자동화 스크립트**

- (UID, O_UID) 복합키 기준 데이터 변경 및 검수 누락 현황 일괄 점검  
- 주요 컬럼별 변화, 미갱신/누락 데이터 자동 추출  
- 데이터 검수 및 이력관리 품질보증에 즉시 활용

---

## 처리 프로세스

1. **데이터 표준화**
    - 과거(작년)·올해 데이터 각각 로드
    - 결측치, 공백, 포맷을 통일해 비교 기반 마련

2. **올해 미갱신(검수 미처리) 데이터 추출**
    - 올해 데이터 중 `'검수'` 컬럼이 공백(미처리)인 행만 필터링

3. **복합키(UID, O_UID) 기준 중복 제거**
    - 올해 미갱신, 전체 작년 데이터 각각에서  
      (UID, O_UID) 조합별로 한 행씩만 남김

4. **작년 데이터 비교 키 필터링**
    - 올해 미갱신 복합키 set에 맞춰 작년 데이터에서 해당 키만 선별

5. **비교 컬럼 자동 확정**
    - 비교 대상 컬럼 중 양쪽 모두에 존재하는 컬럼만 추출

6. **복합키 기준 Merge(조인)**
    - (UID, O_UID) 기준으로 작년/올해 데이터셋 right join  
    - (올해 미갱신 데이터 기준, 작년에 없는 키는 NaN)

7. **값 일치 여부(완전일치) 판단**
    - 지정 컬럼별로 값이 하나라도 다르면 '불일치'로 표시  
    - 복합키와 '검수' 컬럼은 비교에서 제외

8. **변경 내용 상세 기록**
    - 값이 달라진 컬럼명  
      `'컬럼명: "작년값"→"올해값"'` 형식으로 상세 변경 내역 기록

9. **최종 품질오류 필터**
    - “값이 달라졌지만, 올해 검수값이 1이 아닌 행”만 최종 추출  
    - (변경이 있는데 검수 누락된, 반드시 검토해야 할 데이터)

10. **CSV 저장 및 요약 출력**
    - 결과를 파일로 저장  
    - 주요 결과 개수/경로를 터미널에 요약 출력

---

## 기대 효과

- **데이터 검수 누락, 품질오류, 변경 이력**을 한 번에 자동 점검
- 컬럼별 상세 변경내역 자동 기록
- 대규모 연도별 공간DB 품질관리, 이력감리 실무에 즉시 활용 가능

---

## 실행 결과

- **결과 CSV** :  
  - `변경이 있지만 검수 미처리된 행` + 상세 변경 내용 포함  
- **터미널 출력** :  
  - 주요 결과 개수, 파일경로 요약 안내  
  - → 관리상 즉시 검토 필요 항목 한눈에 파악

---

> 본 스크립트는 공간데이터뿐만 아니라, UID+O_UID 형태의 이력관리 시스템 전반에 응용 가능합니다.

